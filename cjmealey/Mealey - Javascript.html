<html>

<head>
  <link href='https://fonts.googleapis.com/css?family=Fauna+One' rel='stylesheet' type='text/css'>
  <style>
    body {font-family:'Fauna One', serif;}
    		td {padding:10px;}
  </style>
  <script>
    <!-- javascript solution: creates new elements with attributes -->
    var xmlhttp = new XMLHttpRequest();
    var url = "https://api.svsu.edu/courses?prefix=CS";

    xmlhttp.onreadystatechange = function() {
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var myArr = JSON.parse(xmlhttp.responseText);
        myFunction(myArr);
		console.log(myArr);
      }
    };
    xmlhttp.open("GET", url, true);
    xmlhttp.send();

    function myFunction(arr) {
      var out = "";
      var i;
      for (i = 0; i < arr.courses.length; i++) {
        var newP = document.createElement("option");
        newP.setAttribute("value", i);
        var newText = document.createTextNode(arr.courses[i].prefix + " " +
          arr.courses[i].courseNumber + " " +
          arr.courses[i].term + " " +
          arr.courses[i].meetingTimes[0].days + " " +
          arr.courses[i].meetingTimes[0].startTime + " " +
          arr.courses[i].meetingTimes[0].instructor);
        document.getElementById("id02").appendChild(newP);
        newP.appendChild(newText);
        // out += arr.courses[i].prefix + " " + arr.courses[i].courseNumber + "<br />";
      }
      // document.getElementById("id01").innerHTML = out;
    }
  </script>

</head>
















<body>








  <h1>Program 02: SVSU API</h1>
  <table border="1">
    <tr>
      <td>
        <h2>Courses Taken</h2>
        <p>Enter courses separated by commas: CS 105, CIS 255, ... </p>
        <input type="text">
      </td>
      <td>
        <h2>Courses for Degree</h2>
        <p>Edit, if desired</p>
        <textarea id="allCoursesNeeded" rows="6" cols="40"></textarea>
      </td>
    </tr>
    <tr>
      <td>
        <h2>Courses Available for Registration</h2>
        <p> Courses not taken, but prerequisites present</p>
        <br><select id="id02"></select>
      </td>
      <td>
        <h2>Courses Not Yet Available</h2>
        <p> Courses required, but prerequisites not present</p>
      </td>
    </tr>
  </table>

	  <p id="id01"></p>


  <script>
    // Courses for CS
    var csArray = ["CS 105", "MATH 300", "CS 116", "CS 216", "CS 245"];

    // Courses for CIS
    var cisArray = ["CS 105", "MATH 300", "CS 116", "CS 216", "CS 245"];

    //insert cs courses to textarea (id="allCoursesNeeded")
    var allCourses = document.getElementById("allCoursesNeeded");
    var allCoursesText = "";

    for (var i = 0; i < csArray.length; i++) {
      allCoursesText += csArray[i] + ", ";
      allCourses.innerHTML = allCoursesText;
    }
  </script>
</body>

</html>